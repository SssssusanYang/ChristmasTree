<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Tree Generator</title>
    <style>
        table {
            border-collapse: collapse;
        }
        td {
            padding: 5px;
        }
        body {
            transition: background-color 0.5s;
        }
        pre {
            transition: color 0.5s;
        }
    </style>
</head>
<body>
    <h1>Christmas Tree Generator for lxy&zly</h1>
    <form method="POST">
        <label for="height">Enter Tree Height:</label>
        <input type="number" id="height" name="height" min="1" value="{{ height }}" required>
        <br>
        <label for="top">Enter Top Text:</label>
        <input type="text" id="top" name="top" value="{{ top }}" required>
        <br>
        <label for="probability">Enter Decoration Probability:</label>
        <input type="number" id="probability" name="probability" min="0" max="1" step="0.01" value="{{ probability }}" required>
        <br>
        <label>Select Emojis:</label>
        <br>
        <table>
            <tr>
                {% for emoji in ["O", "@", "o", ".", "💖",  "✨", "❤️", "💚","💙","❣️","💘"] %}
                    <td>
                        <input type="checkbox" id="{{ emoji }}" name="emojis" value="{{ emoji }}" {% if emoji in selected_emojis %}checked{% endif %}>
                        <label for="{{ emoji }}">{{ emoji }}</label>
                    </td>
                {% endfor %}
            </tr>
            <tr>
                {% for emoji in ["🎀", "❄️","🌲", "🎄", "🎉", "🎊","🎁", "🎅", "🔔","💗","💓"] %}
                    <td>
                        <input type="checkbox" id="{{ emoji }}" name="emojis" value="{{ emoji }}" {% if emoji in selected_emojis %}checked{% endif %}>
                        <label for="{{ emoji }}">{{ emoji }}</label>
                    </td>
                {% endfor %}
            </tr>
            <tr>
                {% for emoji in ["👻", "👽","💀","😈","👹","💩","🤖","💍","💋", "⭐️", "🌟"] %}
                    <td>
                        <input type="checkbox" id="{{ emoji }}" name="emojis" value="{{ emoji }}" {% if emoji in selected_emojis %}checked{% endif %}>
                        <label for="{{ emoji }}">{{ emoji }}</label>
                    </td>
                {% endfor %}
            </tr>
            <tr>
                {% for emoji in ["👕","🧤","🧣","🧢","🥾","🐦","🐍","🦄","🐇","🐈", "🦦"] %}
                    <td>
                        <input type="checkbox" id="{{ emoji }}" name="emojis" value="{{ emoji }}" {% if emoji in selected_emojis %}checked{% endif %}>
                        <label for="{{ emoji }}">{{ emoji }}</label>
                    </td>
                {% endfor %}
            </tr>
        </table>
        <br>
        <button type="submit">Generate Tree</button>
    </form>
    {% if tree %}
        <pre id="tree">{{ tree | safe }}</pre>
        <button onclick="copyTree()">Copy Tree</button>
        <button onclick="downloadTree()">Download Tree</button>
    {% endif %}

    <button onclick="toggleBackgroundColor()">Toggle Background Color</button>
    <button onclick="toggleTreeColor()">Toggle Tree Color</button>

    <script>
        const colors = ['white', '#2ecc71', 'black', '#3498db', '#e74c3c', '#f1c40f'];
        const treeColors = ['#333', '#2ecc71', '#3498db', '#e74c3c', '#f1c40f', '#9b59b6'];
        let currentColorIndex = 0;
        let currentTreeColorIndex = 0;

        function copyTree() {
            const tree = document.getElementById('tree');
            const range = document.createRange();
            range.selectNode(tree);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            alert('Tree copied to clipboard!');
        }

        function downloadTree() {
            const tree = document.getElementById('tree').innerText;
            const blob = new Blob([tree], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'christmas_tree.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function toggleBackgroundColor() {
            currentColorIndex = (currentColorIndex + 1) % colors.length;
            document.body.style.backgroundColor = colors[currentColorIndex];
        }

        function toggleTreeColor() {
            currentTreeColorIndex = (currentTreeColorIndex + 1) % treeColors.length;
            document.getElementById('tree').style.color = treeColors[currentTreeColorIndex];
        }
    </script>
</body>
</html>